# การปรับปรุงรายงานผู้ดูแลระบบ: มุมมองรายวัน, รายเดือน, รายปี

## เป้าหมาย
พัฒนาระบบรายงานให้ครอบคลุมยิ่งขึ้น โดยแยกการแสดงผลข้อมูลเป็นแบบ รายวัน (Daily), รายเดือน (Monthly), และ รายปี (Yearly) ซึ่งในแต่ละมุมมองจะประกอบด้วย:
- ตารางสรุป (รายการการจอง)
- กราฟแท่ง/กราฟเส้น (แนวโน้มการจอง)
- กราฟวงกลม (สัดส่วนการใช้งาน)

## สิ่งที่ต้องให้ผู้ใช้งานพิจารณา
> [!NOTE]
> การเปลี่ยนแปลงนี้จะปรับเปลี่ยนหน้า "รายงาน" (Reports) เดิม ให้มีแท็บหรือเมนู Dropdown สำหรับเลือกโหมดการแสดงผล (รายวัน/รายเดือน/รายปี)

## รายละเอียดการเปลี่ยนแปลง

### Frontend (User Interface)
#### [แก้ไข] [admin/reports/page.js](file:///d:/booking/frontend/app/admin/reports/page.js)
- เพิ่ม State สำหรับ `viewMode` ('daily', 'monthly', 'yearly')
- เพิ่มตัวเลือกวันที่ (Date Picker) ที่เปลี่ยนรูปแบบตาม `viewMode` ที่เลือก
- สร้างระบบกรองข้อมูล (Filter Logic) เพื่อคัดแยกข้อมูล `allBookings` ตามช่วงเวลาที่เลือก
- คำนวณสถิติ (ยอดรวม, อนุมัติแล้ว ฯลฯ) ใหม่แบบ Real-time จากข้อมูลที่กรองแล้ว
- ส่งข้อมูลที่กรองแล้วไปยังกราฟต่างๆ เพื่อแสดงผล

#### [แก้ไข] [admin/components/DashboardCharts.js](file:///d:/booking/frontend/app/admin/components/DashboardCharts.js)
- ปรับแก้ Component ให้รับค่า `data` ผ่าน Props ได้ แทนที่จะดึงข้อมูลเองภายใน Component อย่างเดียว (เพื่อให้แสดงข้อมูลที่กรองแล้วจากหน้า Reports ได้)
- **หรือ** สร้างไฟล์ใหม่ `ReportCharts.js` ถ้าหาก `DashboardCharts` มีความซับซ้อนหรือผูกติดกับหน้า Dashboard มากเกินไป

## แผนการตรวจสอบ (Verification Plan)
### การทดสอบแบบอัตโนมัติ (Automated Tests)
- ไม่มี (เน้นการตรวจสอบ Logic บนหน้าจอ)

### การทดสอบด้วยตนเอง (Manual Verification)
1. **มุมมองรายวัน (Daily View):** เลือกวันที่ต้องการ -> ตรวจสอบว่าตารางแสดงเฉพาะการจองของวันนั้น และกราฟแสดงข้อมูลรายชั่วโมง
2. **มุมมองรายเดือน (Monthly View):** เลือกเดือนที่ต้องการ -> ตรวจสอบว่าตารางแสดงการจองทั้งเดือน และกราฟแสดงข้อมูลรายวัน
3. **มุมมองรายปี (Yearly View):** เลือกปีที่ต้องการ -> ตรวจสอบว่าตารางแสดงการจองทั้งปี และกราฟแสดงข้อมูลรายเดือน
4. **การส่งออกข้อมูล (Export):** ตรวจสอบไฟล์ Excel ว่าข้อมูลที่ออกมาตรงกับช่วงเวลาที่เลือกกรองไว้
